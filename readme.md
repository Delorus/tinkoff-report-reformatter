# Сводка

Утилита для генерации сводного отчета в формате CSV/XLSX из брокерского отчета, 
который можно получить в Тинькофф Инвестиции (в формате XLSX).

# Формат сводного отчета

## Сводка по операциям по дням

Для каждой валюты своя отдельная таблица, в конце приводится суммарный итог.

| Дата исполнения | Операция        | Сумма зачисления | Сумма списания |
| --------------- | --------------- | ---------------- | -------------- |
|      01.02.2020 | Покупка/продажа |               0p |            50p |
|      01.02.2020 | Покупка/продажа |             100p |             0p |
| Итого           |                 |             100p |            50p |
|                 |                 |                  |           +50p |


## Детальный отчет по каждому инструменту

| Инструмент | Продажа | Покупка | Частично | Комиссия | Результат | 
| ---------- | ------- | ------- | -------- | -------- | --------- |
|     Лукойл |    100р |     50р |       Да |       1p |       49p |
|        ММК |     50p |     50p |      Нет |       1p |       -1p |
| Итого:     |    150p |    100p |          |       2p |       48p |


## Отчет по активам на конец периода

| Название            | Средняя | Количество | Стоимость | Валюта |
| ------------------- | ------- | ---------- | --------- | ------ |
|                 RUB |       1 |        100 |       100 |    RUB |
|            Сбербанк |  230.76 |         30 |    6922.8 |    RUB |
|                 ММК |   44.21 |         50 |    2210.5 |    USD |
| Итоговая стоимость: |         |            |    7022.8 |    RUB |
|                     |         |            |    2210.5 |    USD |

# Модель

## Операция 

### Свойства

* Дата операции
* Комиссия -- цена + валюта
* Тип -- покупка, продажа
* Цена -- число + валюта
* Инструмент
* Количество
* Сумма сделки

### Действия


## Инструмент

### Свойства

* Название
* Код

### Действия


## Портфель

### Свойства

* Список инструментов на начало периода 
* Средняя цена по каждому инструменту

### Действия

* Посчитать остаток: принимает список операций и рассчитывает состояние портфеля после применения всех операций